---
title: Web 键盘输入法应用开发指南——实战（一）
date: 2022-03-07 14:33:48
categories:
    - 技术
tags: 
    - 技术
    - 输入法
    - Web
    - JavaScript
---
## 介绍
从这篇文章开始，我们通过一个小项目来实践键盘和输入法相关的开发要点。这是一个在线输入法（Online IME）工具，功能类似Google提供的一个在线输入工具[1]。有了这类工具，你可以在Web页面里面直接使用输入法输入，而不依赖本地设备是否安装输入法。完整代码可以访问[这里](https://github.com/jtzcode/online-ime)[2]。

![google-input](google-input.png)
<center><div style="font-size:16px;">Google Input Tools</div></center>

## 功能
这个在线输入法工具有以下功能点：
- 支持简体中文的输入
- 支持中文输入法基本输入功能（组字、选择、提交、取消等）
- 支持数字和符号的输入
- 构造类似本地输入法的UI体验
- 屏蔽功能键防止干扰输入
- 支持中英文切换
- 其他功能

涉及技术点有：
- 键盘事件的处理
- 输入法事件的处理
- 组合键的处理
- UI控件的操作
- 输入法服务端的实现

这篇文章我们先实现最基本的功能，然后在下篇文章中丰富一些细节。这里提一下服务端的实现，因为我们相当于自己实现了一个输入法，因此需要一个数据库来提供**输入字符到候选字词的映射**。一般本地安装的输入法（比如搜狗、百度等）都会有自己的词库，而我们这个是在线的输入，因此需要通过API来获取相应的字词。这里我直接使用了**Google Input Tools提供的公开API**。

## 基本实现
我们的实现分前后两端。前端会展示在线输入法基本的UI界面，包括输入的文本框、组字框和候选框。然后给文本框绑定需要的事件（比如keydown），捕获并将用户**输入的拼音**发送到服务端。

服务端会调用Google的输入服务返回候选词并返回。从服务端拿到候选词后，前端解析结果并调整UI的样式（展示、移动候选框）。最后还要提交用户输入的结果到文本框完成输入。

### 前端实现


### 服务端实现

## 总结

## 参考阅读
[1] [Google Input Tools](https://www.google.com/inputtools/try/)
[2] [Online-IME Demo](https://github.com/jtzcode/online-ime)